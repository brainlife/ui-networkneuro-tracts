<!doctype html>
<html>

<head>
	<title>Tractview</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF8">
	<link href="//fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>

<body>
    <div id="tractview" v-cloak>
        <div class="error" v-if="error">{{error}}</div>
        <tractview :config="config" v-else></tractview>
    </div>
	
	<!-- Dep Scripts -->
	<script type="text/javascript" src="node_modules/three/build/three.min.js"></script>
	<script type="text/javascript" src="node_modules/panning-orbit-controls/dist/panning-orbit-controls.js"></script>
	<script type="text/javascript" src="node_modules/three/examples/js/Detector.js"></script>
	<script type="text/javascript" src="node_modules/three/examples/js/loaders/VTKLoader.js"></script>

	<script type="text/javascript" src="node_modules/pako/dist/pako_inflate.min.js"></script>
	<script type="text/javascript" src="node_modules/vue/dist/vue.min.js"></script>

	<!-- Main Scripts -->
	<script type="text/javascript" src="lib/dist.bundled.js"></script>
    <script type="text/javascript" src="lib/stats.js"></script>
    
    <script type="text/javascript" src="components/tractview.js"></script>
    <script type="text/javascript" src="components/amatrix.js"></script>
    
    <!--<script type="text/javascript" src="testdata/config.js"></script>-->
    <script type="text/javascript" src="labels.js"></script>
    <script type="text/javascript" src="testdata/networkneuro/index.js"></script>
	<script>
        /*
        let debug_config = localStorage.getItem("debug_config");
        if(debug_config) debug_config = JSON.parse(debug_config);
		let config = debug_config || window.parent.config || window.config;

        //append jwt to config..
        let jwt = localStorage.getItem("jwt");
        if(jwt) config.tracts.forEach(tract=>{
            tract.url += "&at="+jwt;
        });
        */

        console.log("testdata index.json");
        fetch("testdata/networkneuro/index.json").then(res=>{
            return res.json();
        }).then(json=>{
            const config = { labels, roi_pairs: json.roi_pairs };
            //console.dir(config);
            
            new Vue({
                el: '#tractview',
                data: function() {
                    return {
                        error: null,
                        config,
                    }
                },
                components: ['tractview'],
                created() {
                    if (!Detector.webgl) this.error = "Your browser does not support WebGL, so the TractViewer is unable to be initiated.";
                }
            });
        });
	</script>
</body>

</html>
